<html>
<title>GeograPhyl</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/x-icon" href="favicon.ico">
<link rel="manifest" href="/site.webmanifest">
<link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.12/css/jquery.dataTables.min.css"/>       
<link rel="stylesheet" href="lib/leafletjs/leaflet.css">
<link rel="stylesheet" href="css/custom.css">
<style>
body,h1,h2,h3,h4,h5,h6 {font-family: "Lato", sans-serif}
.w3-bar,h1,button {font-family: "Montserrat", sans-serif}
.fa-anchor,.fa-coffee {font-size:200px}
</style>
    <body>
        <h1> GeograPhyl </h1>
        <p>This website uses heuristics to track the movement of the SARS-CoV-2 novel coronavirus
            through the United States of America by drawing on publicly available tagged
            viral genetic sequences and phylogenetic tree constructed by <a href = "https://usher-wiki.readthedocs.io/en/latest/">UShER.</a>
        </p>
        <div id="display">
            <div id="mapid"></div>
            <style>
                #mapid {
                    height: 400px;
                }
            </style>
        </div>
        <div id="maintext">
            <p>The above heatmap by default displays the count of inferred unique families of the virus in each state,
                identified by counting clusters of viral sequences from an area that are closely related and appear 
                to share a single common ancestor that entered the region from outside. 
            </p>
            <p>By clicking on a single state of interest, the display changes to an estimate of genetic flow
                of the virus from other states. This metric is scaled by the total clusters detected in both 
                the state of interest and the putative origin. Generally it reflects close geographic association, suggesting
                the virus tends to cross interstate borders by land. Some regions have odd associations due to poor 
                sequencing and the amplification of weak signals by our scaling process.
            </p>
        </div>
        <div id="table-container"></div>
        <script src="lib/leafletjs/leaflet.js"></script>
        <script src="data/us-states.js"></script>
        <script src="src/main.js"></script>
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.2.1/js/bootstrap.bundle.min.js"></script>
        <script src="src/jquery.csv.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>
        <script src="src/csv_to_html_table.js"></script> 
        <script>
           CsvToHtmlTable.init({
              csv_path: 'data/display_tables/default_clusters.tsv', 
              element: 'table-container', 
              allow_download: false,
              csv_options: {separator: '\t', delimiter: '\t'},
              datatables_options: {"paging": true, "searching": true, "order": [[8,"desc"]]},
              custom_formatting: [[9,
                function (data,type,row,meta) {
                    return '<a href="' + encodeURI(data) + '" target="_blank">View Cluster</a>';
                    }
                ]]
            });
        </script>
        <a href = "data/hardcoded_clusters.tsv", download = "sarscov2_clusters.tsv">Download full dataset.</a>
    </body>
</html>